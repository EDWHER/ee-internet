<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>E&E INTERNET SERVICE | WISP Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- CHART -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#0b1220;--panel:#111f3b;--card:#162754;
  --text:#eaf0ff;--muted:#9aa8c7;
  --accent:#4da3ff;--good:#29d391;--bad:#ff6b6b;--warn:#ffcc66;
  --radius:16px;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:system-ui;
  background:var(--bg);color:var(--text)
}
header{
  background:linear-gradient(90deg,#4da3ff,#29d391);
  padding:16px;border-radius:0 0 20px 20px
}
header h1{margin:0;font-size:20px}
nav{
  display:flex;gap:10px;margin-top:10px;flex-wrap:wrap
}
nav button{
  border:none;padding:10px 14px;border-radius:12px;
  cursor:pointer;background:#ffffff22;color:#fff
}
nav button.active{background:#00000033;font-weight:700}
.wrap{padding:20px;max-width:1300px;margin:auto}
.tab{display:none}
.tab.active{display:block}

.cards{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px
}
.card{
  background:var(--card);padding:15px;border-radius:var(--radius)
}
.card h3{margin:0;font-size:13px;color:var(--muted)}
.card p{margin:5px 0 0;font-size:22px;font-weight:700}

table{
  width:100%;border-collapse:collapse;margin-top:15px
}
th,td{
  padding:10px;border-bottom:1px solid #ffffff22;font-size:13px
}
th{color:var(--muted);text-align:left}
.bad{color:var(--bad)}
.good{color:var(--good)}
.warn{color:var(--warn)}

input,select,textarea{
  width:100%;padding:10px;border-radius:12px;
  border:none;background:#00000044;color:#fff
}
button.primary{
  background:var(--accent);border:none;padding:10px 15px;
  border-radius:12px;color:#fff;cursor:pointer
}
</style>
</head>

<body>

<header>
  <h1>E&E INTERNET SERVICE â€“ WISP ADMIN</h1>
  <nav>
    <button onclick="showTab('dashboard')" class="active">ðŸ“Š Dashboard</button>
    <button onclick="showTab('clientes')">ðŸ‘¥ Clientes</button>
    <button onclick="showTab('pagos')">ðŸ’³ Pagos</button>
    <button onclick="showTab('contabilidad')">ðŸ“’ Contabilidad</button>
    <button onclick="showTab('morosos')">â›” Morosos</button>
  </nav>
</header>

<div class="wrap">

<!-- DASHBOARD -->
<section id="dashboard" class="tab active">
  <div class="cards">
    <div class="card"><h3>Clientes</h3><p id="dClientes">0</p></div>
    <div class="card"><h3>Ingresos</h3><p class="good" id="dIngresos">RD$0</p></div>
    <div class="card"><h3>Gastos</h3><p class="bad" id="dGastos">RD$0</p></div>
    <div class="card"><h3>Balance</h3><p id="dBalance">RD$0</p></div>
  </div>
  <canvas id="chart" style="margin-top:30px"></canvas>
</section>

<!-- CLIENTES -->
<section id="clientes" class="tab">
  <h2>Registrar Cliente</h2>
  <input id="cNombre" placeholder="Nombre">
  <input id="cPlan" placeholder="Plan (Ej: 10 Mbps)">
  <input id="cPrecio" type="number" placeholder="Precio mensual">
  <button class="primary" onclick="addCliente()">Guardar</button>

  <table>
    <thead><tr><th>Cliente</th><th>Plan</th><th>Precio</th></tr></thead>
    <tbody id="clientesTable"></tbody>
  </table>
</section>

<!-- PAGOS -->
<section id="pagos" class="tab">
  <h2>Registrar Pago</h2>
  <select id="pCliente"></select>
  <input id="pMonto" type="number" placeholder="Monto">
  <button class="primary" onclick="addPago()">Registrar Pago</button>
</section>

<!-- CONTABILIDAD -->
<section id="contabilidad" class="tab">
  <h2>Registrar Gasto</h2>
  <input id="gDesc" placeholder="DescripciÃ³n">
  <input id="gMonto" type="number" placeholder="Monto">
  <button class="primary" onclick="addGasto()">Agregar Gasto</button>

  <table>
    <thead><tr><th>DescripciÃ³n</th><th>Monto</th></tr></thead>
    <tbody id="gastosTable"></tbody>
  </table>
</section>

<!-- MOROSOS -->
<section id="morosos" class="tab">
  <h2>Clientes Morosos</h2>
  <table>
    <thead><tr><th>Cliente</th><th>Plan</th><th>Precio</th></tr></thead>
    <tbody id="morososTable"></tbody>
  </table>
</section>

</div>

<script>
let clientes=JSON.parse(localStorage.getItem("clientes")||"[]");
let pagos=JSON.parse(localStorage.getItem("pagos")||"[]");
let gastos=JSON.parse(localStorage.getItem("gastos")||"[]");

function showTab(id){
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
}

function save(){
  localStorage.setItem("clientes",JSON.stringify(clientes));
  localStorage.setItem("pagos",JSON.stringify(pagos));
  localStorage.setItem("gastos",JSON.stringify(gastos));
  render();
}

function addCliente(){
  clientes.push({
    nombre:cNombre.value,plan:cPlan.value,precio:+cPrecio.value
  });
  save();
}

function addPago(){
  pagos.push({cliente:pCliente.value,monto:+pMonto.value});
  save();
}

function addGasto(){
  gastos.push({desc:gDesc.value,monto:+gMonto.value});
  save();
}

function render(){
  clientesTable.innerHTML="";
  pCliente.innerHTML="";
  morososTable.innerHTML="";
  let ingresos=pagos.reduce((a,b)=>a+b.monto,0);
  let totalGastos=gastos.reduce((a,b)=>a+b.monto,0);

  clientes.forEach(c=>{
    clientesTable.innerHTML+=`<tr><td>${c.nombre}</td><td>${c.plan}</td><td>RD$${c.precio}</td></tr>`;
    pCliente.innerHTML+=`<option>${c.nombre}</option>`;
    if(!pagos.find(p=>p.cliente===c.nombre)){
      morososTable.innerHTML+=`<tr><td class="bad">${c.nombre}</td><td>${c.plan}</td><td>RD$${c.precio}</td></tr>`;
    }
  });

  gastosTable.innerHTML="";
  gastos.forEach(g=>{
    gastosTable.innerHTML+=`<tr><td>${g.desc}</td><td>RD$${g.monto}</td></tr>`;
  });

  dClientes.textContent=clientes.length;
  dIngresos.textContent="RD$"+ingresos;
  dGastos.textContent="RD$"+totalGastos;
  dBalance.textContent="RD$"+(ingresos-totalGastos);
}

render();
</script>

</body>
</html>
